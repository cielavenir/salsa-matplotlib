From 1adf9445b8cb0693a8092d2b842cc7db5573b2b3 Mon Sep 17 00:00:00 2001
From: Julian Taylor <jtaylor@ubuntu.com>
Date: Thu, 8 Oct 2015 09:47:15 -0700
Subject: adapt setup to find multiarched tk/tcl

Bug-Ubuntu: https://bugs.launchpad.net/ubuntu/+source/matplotlib/+bug/752647
Forwarded: no, only if we upstream multiarchification

Patch-Name: multiarch-tktcl.patch
---
 setupext.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/setupext.py b/setupext.py
index f8036157..3fe51ada 100644
--- a/setupext.py
+++ b/setupext.py
@@ -1818,6 +1818,10 @@ class BackendGtk3Agg(OptionalBackendPackage):
         if 'TRAVIS' in os.environ:
             raise CheckFailed("Can't build with Travis")
 
+        # yoh: Builds of Debian packages often lead to a dead-lock here
+        #      As a workaround forcing build manually without a check
+        BackendAgg.force = True
+        return "ok"
         # This check needs to be performed out-of-process, because
         # importing gi and then importing regular old pygtk afterward
         # segfaults the interpreter.
