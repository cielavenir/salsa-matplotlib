From df9b1347d2eda476776c6cf557838c38c6b9aa44 Mon Sep 17 00:00:00 2001
From: Julian Taylor <jtaylor@ubuntu.com>
Date: Thu, 8 Oct 2015 09:47:15 -0700
Subject: adapt setup to find multiarched tk/tcl

Bug-Ubuntu: https://bugs.launchpad.net/ubuntu/+source/matplotlib/+bug/752647
Forwarded: no, only if we upstream multiarchification

Patch-Name: multiarch-tktcl.patch
---
 setupext.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/setupext.py b/setupext.py
index fc1bc0c..1e1fb16 100644
--- a/setupext.py
+++ b/setupext.py
@@ -1716,6 +1716,10 @@ class BackendGtk3Agg(OptionalBackendPackage):
         if 'TRAVIS' in os.environ:
             raise CheckFailed("Can't build with Travis")
 
+        # yoh: Builds of Debian packages often lead to a dead-lock here
+        #      As a workaround forcing build manually without a check
+        BackendAgg.force = True
+        return "ok"
         # This check needs to be performed out-of-process, because
         # importing gi and then importing regular old pygtk afterward
         # segfaults the interpreter.
